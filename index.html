<!doctype html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>CAVEMAN</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="shortcut icon" href="/favicon.ico" />
	<!-- <link rel="stylesheet" href="style.css" /> -->
	<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
	<link rel="stylesheet" href="style.css" />
	<link href="https://fonts.googleapis.com/css?family=Raleway:300,400" rel="stylesheet" />
	<script>
		const glb_filepath = "/3d-assets/buddy.glb";
		const start_pos = [-1, -1, -1];
		const end_pos = [0, 0, 0];
		const look_at_vec = [0, 0, 0];
		const showControls = false;
		const autoRotateModel = true;
		const playBarEnable = false;
	</script>
	<script defer type="module" src="src/homepage.jsx"></script>
</head>

<body>
	<script type="text/javascript">
        let userImageLink =
"/images/buddyfallback.png";
        let time_start, end_time, bytesps;
		let periodic_progress_update = false;
		let firstload = true;

        // The size in bytes
        let downloadSize = 74360;
        let downloadImgSrc = new Image();

        downloadImgSrc.onload = function () {
            end_time = new Date().getTime();
            displaySpeed();
        };
        time_start = new Date().getTime();
        downloadImgSrc.src = userImageLink;


        function displaySpeed() {
            let timeDuration = (end_time - time_start) / 1000;
            bytesps = (downloadSize / timeDuration).toFixed(2);
			console.log(bytesps);
        }


		let intervalId = null; // Store the interval ID for clearing later
		let start_time = null;

		function fetchDataAndUpdateUI() {
			try {

				if(periodic_progress_update)
				{
					if(firstload)
					{
						firstload = false;
						start_time = new Date().getTime();
						console.log("start_time: %f", start_time);
					}
					const totalBytes = 6027704;
					
					const curr_time = new Date().getTime();
					console.log("curr_time: %f", curr_time);
					console.log("start_time: %f", start_time);
					const time_diff = (curr_time - start_time)/1000;
					console.log("time_diff: %f", time_diff);

					const estBytesDownLoad = time_diff * bytesps;
					console.log("Estimated Bytes Downloaded: %f", estBytesDownLoad);

					const newProgress = Math.round(500 * estBytesDownLoad / totalBytes);
					console.log("Progress percent: %d", newProgress);
					
					let progress = newProgress > 95 ? 95 : newProgress;
					document.getElementById("buddyprogressbar").style.width = progress + "%";
					document.getElementById("buddyprogressbar").textContent = progress + "%";
				}


			} catch (error) {
				console.error('Error during periodic update:', error);
				// Optionally, stop the interval on error
				clearInterval(intervalId);
			}
		}

		intervalId = setInterval(fetchDataAndUpdateUI, 500);
    </script>
	<div id="headerroot"></div>
	<div class="container-fluid p-4">
        <div class="row justify-content-center">
			<div class="col-lg-9 col-md-11 col-12">
                <div class="cave-warning-container py-4 px-2 text-center text-dark">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="hazard-sign me-3">⚠️</div>
                        
                        <div class="text-container d-flex align-items-center">
                            <span style="white-space: nowrap;">Caves are&nbsp;</span>
                            <div class="animated-word-container d-flex align-items-center justify-content-center">
                                <span class="animated-word">dangerous</span>
                                <span class="animated-word">unlit</span>
                                <span class="animated-word">unstable</span>
                                <span class="animated-word">unpredictable</span>
                                <span class="animated-word">treacherous</span>
								<span class="animated-word">unexplored</span>
								<span class="animated-word">unmapped</span>
                            </div>
                        </div>
                        
                        <div class="hazard-sign ms-3">⚠️</div>
                    </div>
                </div>
			</div>
        </div>
    </div>

	<div class="container-fluid">
        <div class="row image-row align-items-center justify-content-center mx-auto" style="max-width: 1200px;">
            <!-- Left Image - Hidden on mobile -->
            <div class="col-2 d-none d-md-block text-center">
                <div class="image-container">
                    <img src="images/cave1.jpg" 
                         alt="Left placeholder image">
                </div>
            </div>
            
            <!-- Center Image - Always visible, larger -->
            <div class="col-10 col-md-6 offset-md-0">
                <div class="image-container">
                    <img src="images/cave2.jpg" 
                         alt="Center placeholder image">
                </div>
            </div>
            
            <!-- Right Image - Hidden on mobile -->
            <div class="col-2 d-none d-md-block text-center">
                <div class="image-container">
                    <img src="images/cave3.jpg" 
                         alt="Right placeholder image">
                </div>
            </div>
        </div>
    </div>
	
	<div class="container-xs">
		<div class="row">
			<div class="col-xl-8 mx-auto mt-4 mb-5 text-center">
				<div class="section-title">
					<br>
					<br>
					<h1 class="title">We want to explore and map caves!</h1>
					<h1 class="title"><b>We want to keep people out of danger!</b></h1>
					<br>
					<br>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto text-center">
				<div class="section-title">
					<br>
					<h1 class="title"><b>Introducing CAVEMAN</b></h1>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto text-center">
				<div class="section-title">
					<h1 class="title"><b>C</b>ave <b>A</b>utonomous <b>V</b>ehicle for <b>E</b>xploration, <b>M</b>apping, <b>A</b>nd <b>N</b>avigation</b></h1>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto my-5 text-center">
				<div class="section-title">
					<div class="video-container">
						<iframe src="https://www.youtube.com/embed/X-nHYFIHVD8?si=-OO9j7dLnNRfjvOw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto mt-4 text-center">
				<div class="section-title">
					<br>
					<br>
					<h1 class="title">Meet Buddy!</h1>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-md-5 mx-auto">
				<div class="canvassquareparent">
					<div class="canvassquare" id="buddycanvas"></div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto mt-1 text-center">
				<div class="section-title">
					<br>
					<h1 class="title">Learn more about our process!</h1>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-xl-8 mx-auto mb-5 mt-4 text-center">
				<div class="section-title">
					<div class="container">
						<div class="row row-cols-lg-5">
							<div class="col my-1">
								<a href="/mechdesign/"><button class="p-3 m-1 btn btn-primary btn-lg w-100 h-100">Mechanical Design</button></a>
							</div>
							<div class="col my-1">
								<a href="/hw/"><button class="p-3 m-1 btn btn-primary btn-lg w-100 h-100">Hardware</button></a>
							</div>
							<div class="col my-1">
								<a href="/embedded/"><button class="p-3 m-1 btn btn-primary btn-lg w-100 h-100">Low Level Software</button></a>
							</div>
							<div class="col my-1">
								<a href="/ros/"><button class="p-3 m-1 btn btn-primary btn-lg w-100 h-100">High Level Control</button></a>
							</div>
							<div class="col my-1">
								<a href="/maps/"><button class="p-3 m-1 btn btn-primary btn-lg w-100 h-100">Mapping</button></a>
							</div>
						</div>
						<br>
						<br>
					</div>
				</div>
			</div>
		</div>
	</div>
	<button id="scrollupbtn" class="scroll-up-btn btn btn-secondary">
		<i class="arrow-up"></i>
	</button>
	<script>

		document.addEventListener('DOMContentLoaded', () => {
			// document.addEventListener('touchstart', onTouchStart, {passive: true});
			const topbtn = document.getElementById("scrollupbtn");
			console.log(topbtn);
			topbtn.addEventListener("click", () => {
				window.scrollTo(0,0);
			});

			window.addEventListener("scroll", () => {
				if(window.scrollY > 125) {
					topbtn.style.display = "flex";
				}
				else
				{
					topbtn.style.display = "none";
				}
			})
			
		});
		
	</script>
</body>